function Winwheel(e,t){for(let n in defaultOptions={canvasId:"canvas",centerX:null,centerY:null,outerRadius:null,innerRadius:0,numSegments:1,drawMode:"code",rotationAngle:0,textFontFamily:"Arial",textFontSize:20,textFontWeight:"bold",textOrientation:"horizontal",textAlignment:"center",textDirection:"normal",textMargin:null,textFillStyle:"black",textStrokeStyle:null,textLineWidth:1,fillStyle:"silver",strokeStyle:"black",lineWidth:1,clearTheCanvas:!0,imageOverlay:!1,drawText:!0,pointerAngle:0,wheelImage:null,imageDirection:"N",responsive:!1,scaleFactor:1},defaultOptions)this[n]=null!=e&&"undefined"!=typeof e[n]?e[n]:defaultOptions[n];if(null!=e)for(let t in e)"undefined"==typeof this[t]&&(this[t]=e[t]);this.canvasId?(this.canvas=document.getElementById(this.canvasId),this.canvas?(null==this.centerX&&(this.centerX=this.canvas.width/2),null==this.centerY&&(this.centerY=this.canvas.height/2),null==this.outerRadius&&(this.canvas.width<this.canvas.height?this.outerRadius=this.canvas.width/2-this.lineWidth:this.outerRadius=this.canvas.height/2-this.lineWidth),this.ctx=this.canvas.getContext("2d")):(this.canvas=null,this.ctx=null)):(this.canvas=null,this.ctx=null),this.segments=[null];for(let n=1;n<=this.numSegments;n++)this.segments[n]=null!=e&&e.segments&&"undefined"!=typeof e.segments[n-1]?new Segment(e.segments[n-1]):new Segment;if(this.updateSegmentSizes(),null===this.textMargin&&(this.textMargin=this.textFontSize/1.7),this.animation=null!=e&&e.animation&&"undefined"!=typeof e.animation?new Animation(e.animation):new Animation,null!=e&&e.pins&&"undefined"!=typeof e.pins&&(this.pins=new Pin(e.pins)),"image"==this.drawMode||"segmentImage"==this.drawMode?("undefined"==typeof e.fillStyle&&(this.fillStyle=null),"undefined"==typeof e.strokeStyle&&(this.strokeStyle="red"),"undefined"==typeof e.drawText&&(this.drawText=!1),"undefined"==typeof e.lineWidth&&(this.lineWidth=1),"undefined"==typeof t&&(t=!1)):"undefined"==typeof t&&(t=!0),this.pointerGuide=null!=e&&e.pointerGuide&&"undefined"!=typeof e.pointerGuide?new PointerGuide(e.pointerGuide):new PointerGuide,this.responsive&&(winwheelToDrawDuringAnimation=this,this._originalCanvasWidth=this.canvas.width,this._originalCanvasHeight=this.canvas.height,this._responsiveScaleHeight=this.canvas.dataset.responsivescaleheight,this._responsiveMinWidth=this.canvas.dataset.responsiveminwidth,this._responsiveMinHeight=this.canvas.dataset.responsiveminheight,this._responsiveMargin=this.canvas.dataset.responsivemargin,window.addEventListener("load",winwheelResize),window.addEventListener("resize",winwheelResize)),!0==t)this.draw(this.clearTheCanvas);else if("segmentImage"==this.drawMode){winwheelToDrawDuringAnimation=this,winhweelAlreadyDrawn=!1;for(let e=1;e<=this.numSegments;e++)null!==this.segments[e].image&&(this.segments[e].imgData=new Image,this.segments[e].imgData.onload=winwheelLoadedImage,this.segments[e].imgData.src=this.segments[e].image)}}Winwheel.prototype.updateSegmentSizes=function(){if(this.segments){let e=0,t=0;for(let n=1;n<=this.numSegments;n++)null!==this.segments[n].size&&(e+=this.segments[n].size,t++);let n=360-e,i=0;0<n&&(i=n/(this.numSegments-t));let a=0;for(let e=1;e<=this.numSegments;e++)this.segments[e].startAngle=a,a+=this.segments[e].size?this.segments[e].size:i,this.segments[e].endAngle=a}},Winwheel.prototype.clearCanvas=function(){this.ctx&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},Winwheel.prototype.draw=function(e){this.ctx&&("undefined"==typeof e?this.clearCanvas():!0==e&&this.clearCanvas(),"image"==this.drawMode?(this.drawWheelImage(),!0==this.drawText&&this.drawSegmentText(),!0==this.imageOverlay&&this.drawSegments()):"segmentImage"==this.drawMode?(this.drawSegmentImages(),!0==this.drawText&&this.drawSegmentText(),!0==this.imageOverlay&&this.drawSegments()):(this.drawSegments(),!0==this.drawText&&this.drawSegmentText()),"undefined"!=typeof this.pins&&!0==this.pins.visible&&this.drawPins(),!0==this.pointerGuide.display&&this.drawPointerGuide())},Winwheel.prototype.drawPins=function(){if(this.pins&&this.pins.number){let e=this.centerX*this.scaleFactor,t=this.centerY*this.scaleFactor,n=this.outerRadius*this.scaleFactor,a=this.pins.outerRadius,o=this.pins.margin;this.pins.responsive&&(a=this.pins.outerRadius*this.scaleFactor,o=this.pins.margin*this.scaleFactor);let r=360/this.pins.number;for(let d=1;d<=this.pins.number;d++)this.ctx.save(),this.ctx.strokeStyle=this.pins.strokeStyle,this.ctx.lineWidth=this.pins.lineWidth,this.ctx.fillStyle=this.pins.fillStyle,this.ctx.translate(e,t),this.ctx.rotate(this.degToRad(d*r+this.rotationAngle)),this.ctx.translate(-e,-t),this.ctx.beginPath(),this.ctx.arc(e,t-n+a+o,a,0,2*Math.PI),this.pins.fillStyle&&this.ctx.fill(),this.pins.strokeStyle&&this.ctx.stroke(),this.ctx.restore()}},Winwheel.prototype.drawPointerGuide=function(){if(this.ctx){let e=this.centerX*this.scaleFactor,t=this.centerY*this.scaleFactor,n=this.outerRadius*this.scaleFactor;this.ctx.save(),this.ctx.translate(e,t),this.ctx.rotate(this.degToRad(this.pointerAngle)),this.ctx.translate(-e,-t),this.ctx.strokeStyle=this.pointerGuide.strokeStyle,this.ctx.lineWidth=this.pointerGuide.lineWidth,this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(e,-(n/4)),this.ctx.stroke(),this.ctx.restore()}},Winwheel.prototype.drawWheelImage=function(){if(null!=this.wheelImage){let e=this.centerX*this.scaleFactor,t=this.centerY*this.scaleFactor,n=this.wheelImage.width*this.scaleFactor,i=this.wheelImage.height*this.scaleFactor;this.ctx.save(),this.ctx.translate(e,t),this.ctx.rotate(this.degToRad(this.rotationAngle)),this.ctx.translate(-e,-t),this.ctx.drawImage(this.wheelImage,e-n/2,t-i/2,n,i),this.ctx.restore()}},Winwheel.prototype.drawSegmentImages=function(){if(this.ctx){let e=this.centerX*this.scaleFactor,t=this.centerY*this.scaleFactor;if(this.segments)for(let n,i=1;i<=this.numSegments;i++)if(n=this.segments[i],n.imgData.height){let i=0,a=0,o=0,r="",d=n.imgData.width*this.scaleFactor,s=n.imgData.height*this.scaleFactor;r=null===n.imageDirection?this.imageDirection:n.imageDirection,"S"==r?(i=e-d/2,a=t,o=n.startAngle+180+(n.endAngle-n.startAngle)/2):"E"==r?(i=e,a=t-s/2,o=n.startAngle+270+(n.endAngle-n.startAngle)/2):"W"==r?(i=e-d,a=t-s/2,o=n.startAngle+90+(n.endAngle-n.startAngle)/2):(i=e-d/2,a=t-s,o=n.startAngle+(n.endAngle-n.startAngle)/2),this.ctx.save(),this.ctx.translate(e,t),this.ctx.rotate(this.degToRad(this.rotationAngle+o)),this.ctx.translate(-e,-t),this.ctx.drawImage(n.imgData,i,a,d,s),this.ctx.restore()}else console.log("Segment "+i+" imgData is not loaded")}},Winwheel.prototype.drawSegments=function(){if(this.ctx&&this.segments){let e=this.centerX*this.scaleFactor,t=this.centerY*this.scaleFactor,n=this.innerRadius*this.scaleFactor,i=this.outerRadius*this.scaleFactor;for(let a=1;a<=this.numSegments;a++){let o,r,d,s=this.segments[a];if(o=null===s.fillStyle?this.fillStyle:s.fillStyle,this.ctx.fillStyle=o,r=null===s.lineWidth?this.lineWidth:s.lineWidth,this.ctx.lineWidth=r,d=null===s.strokeStyle?this.strokeStyle:s.strokeStyle,this.ctx.strokeStyle=d,d||o){if(this.ctx.beginPath(),!this.innerRadius)this.ctx.moveTo(e,t);else{let i=Math.cos(this.degToRad(s.startAngle+this.rotationAngle-90))*(n-r/2),a=Math.sin(this.degToRad(s.startAngle+this.rotationAngle-90))*(n-r/2);this.ctx.moveTo(e+i,t+a)}this.ctx.arc(e,t,i,this.degToRad(s.startAngle+this.rotationAngle-90),this.degToRad(s.endAngle+this.rotationAngle-90),!1),this.innerRadius?this.ctx.arc(e,t,n,this.degToRad(s.endAngle+this.rotationAngle-90),this.degToRad(s.startAngle+this.rotationAngle-90),!0):this.ctx.lineTo(e,t),o&&this.ctx.fill(),d&&this.ctx.stroke()}}}},Winwheel.prototype.drawSegmentText=function(){if(this.ctx){let e,t,n,a,o,r,d,s,l,g,m=this.centerX*this.scaleFactor,u=this.centerY*this.scaleFactor,x=this.outerRadius*this.scaleFactor,p=this.innerRadius*this.scaleFactor;for(let i=1;i<=this.numSegments;i++){this.ctx.save();let c=this.segments[i];if(c.text){e=null===c.textFontFamily?this.textFontFamily:c.textFontFamily,t=null===c.textFontSize?this.textFontSize:c.textFontSize,n=null===c.textFontWeight?this.textFontWeight:c.textFontWeight,a=null===c.textOrientation?this.textOrientation:c.textOrientation,o=null===c.textAlignment?this.textAlignment:c.textAlignment,r=null===c.textDirection?this.textDirection:c.textDirection,d=null===c.textMargin?this.textMargin:c.textMargin,s=null===c.textFillStyle?this.textFillStyle:c.textFillStyle,l=null===c.textStrokeStyle?this.textStrokeStyle:c.textStrokeStyle,g=null===c.textLineWidth?this.textLineWidth:c.textLineWidth,t*=this.scaleFactor,d*=this.scaleFactor;let i="";null!=n&&(i+=n+" "),null!=t&&(i+=t+"px "),null!=e&&(i+=e),this.ctx.font=i,this.ctx.fillStyle=s,this.ctx.strokeStyle=l,this.ctx.lineWidth=g;let f=c.text.split("\n"),y=0-t*(f.length/2)+t/2;"curved"==a&&("inner"==o||"outer"==o)&&(y=0);for(let e=0;e<f.length;e++){if("reversed"==r){if("horizontal"==a){this.ctx.textAlign="inner"==o?"right":"outer"==o?"left":"center",this.ctx.textBaseline="middle";let t=this.degToRad(c.endAngle-(c.endAngle-c.startAngle)/2+this.rotationAngle-90-180);this.ctx.save(),this.ctx.translate(m,u),this.ctx.rotate(t),this.ctx.translate(-m,-u),"inner"==o?(s&&this.ctx.fillText(f[e],m-p-d,u+y),l&&this.ctx.strokeText(f[e],m-p-d,u+y)):"outer"==o?(s&&this.ctx.fillText(f[e],m-x+d,u+y),l&&this.ctx.strokeText(f[e],m-x+d,u+y)):(s&&this.ctx.fillText(f[e],m-p-(x-p)/2-d,u+y),l&&this.ctx.strokeText(f[e],m-p-(x-p)/2-d,u+y)),this.ctx.restore()}else if("vertical"==a){this.ctx.textAlign="center",this.ctx.textBaseline="inner"==o?"top":"outer"==o?"bottom":"middle";let n=c.endAngle-(c.endAngle-c.startAngle)/2-180;n+=this.rotationAngle,this.ctx.save(),this.ctx.translate(m,u),this.ctx.rotate(this.degToRad(n)),this.ctx.translate(-m,-u);let i=0;"outer"==o?i=u+x-d:"inner"==o&&(i=u+p+d);let a=t-t/9;if("outer"==o)for(let t,n=f[e].length-1;0<=n;n--)t=f[e].charAt(n),s&&this.ctx.fillText(t,m+y,i),l&&this.ctx.strokeText(t,m+y,i),i-=a;else if("inner"==o)for(let t,n=0;n<f[e].length;n++)t=f[e].charAt(n),s&&this.ctx.fillText(t,m+y,i),l&&this.ctx.strokeText(t,m+y,i),i+=a;else if("center"==o){let t=0;1<f[e].length&&(t=a*(f[e].length-1)/2);let n=u+p+(x-p)/2+t+d;for(let t,i=f[e].length-1;0<=i;i--)t=f[e].charAt(i),s&&this.ctx.fillText(t,m+y,n),l&&this.ctx.strokeText(t,m+y,n),n-=a}this.ctx.restore()}else if("curved"==a){let n=0;"inner"==o?(n=p+d,this.ctx.textBaseline="top"):"outer"==o?(n=x-d,this.ctx.textBaseline="bottom",n-=t*(f.length-1)):"center"==o&&(n=p+d+(x-p)/2,this.ctx.textBaseline="middle");let i=0,a=0;if(1<f[e].length){this.ctx.textAlign="left",i=4*(t/10);let o=100/n;i*=o;let r=i*f[e].length;a=c.startAngle+((c.endAngle-c.startAngle)/2-r/2)}else a=c.startAngle+(c.endAngle-c.startAngle)/2,this.ctx.textAlign="center";a+=this.rotationAngle,a-=180;for(let t=f[e].length;0<=t;t--){this.ctx.save();let o=f[e].charAt(t);this.ctx.translate(m,u),this.ctx.rotate(this.degToRad(a)),this.ctx.translate(-m,-u),l&&this.ctx.strokeText(o,m,u+n+y),s&&this.ctx.fillText(o,m,u+n+y),a+=i,this.ctx.restore()}}}else if("horizontal"==a){this.ctx.textAlign="inner"==o?"left":"outer"==o?"right":"center",this.ctx.textBaseline="middle";let t=this.degToRad(c.endAngle-(c.endAngle-c.startAngle)/2+this.rotationAngle-90);this.ctx.save(),this.ctx.translate(m,u),this.ctx.rotate(t),this.ctx.translate(-m,-u),"inner"==o?(s&&this.ctx.fillText(f[e],m+p+d,u+y),l&&this.ctx.strokeText(f[e],m+p+d,u+y)):"outer"==o?(s&&this.ctx.fillText(f[e],m+x-d,u+y),l&&this.ctx.strokeText(f[e],m+x-d,u+y)):(s&&this.ctx.fillText(f[e],m+p+(x-p)/2+d,u+y),l&&this.ctx.strokeText(f[e],m+p+(x-p)/2+d,u+y)),this.ctx.restore()}else if("vertical"==a){this.ctx.textAlign="center",this.ctx.textBaseline="inner"==o?"bottom":"outer"==o?"top":"middle";let n=c.endAngle-(c.endAngle-c.startAngle)/2;n+=this.rotationAngle,this.ctx.save(),this.ctx.translate(m,u),this.ctx.rotate(this.degToRad(n)),this.ctx.translate(-m,-u);let i=0;"outer"==o?i=u-x+d:"inner"==o&&(i=u-p-d);let a=t-t/9;if("outer"==o)for(let t,n=0;n<f[e].length;n++)t=f[e].charAt(n),s&&this.ctx.fillText(t,m+y,i),l&&this.ctx.strokeText(t,m+y,i),i+=a;else if("inner"==o)for(let t,n=f[e].length-1;0<=n;n--)t=f[e].charAt(n),s&&this.ctx.fillText(t,m+y,i),l&&this.ctx.strokeText(t,m+y,i),i-=a;else if("center"==o){let t=0;1<f[e].length&&(t=a*(f[e].length-1)/2);let n=u-p-(x-p)/2-t-d;for(let t,i=0;i<f[e].length;i++)t=f[e].charAt(i),s&&this.ctx.fillText(t,m+y,n),l&&this.ctx.strokeText(t,m+y,n),n+=a}this.ctx.restore()}else if("curved"==a){let n=0;"inner"==o?(n=p+d,this.ctx.textBaseline="bottom",n+=t*(f.length-1)):"outer"==o?(n=x-d,this.ctx.textBaseline="top"):"center"==o&&(n=p+d+(x-p)/2,this.ctx.textBaseline="middle");let i=0,a=0;if(1<f[e].length){this.ctx.textAlign="left",i=4*(t/10);let o=100/n;i*=o;let r=i*f[e].length;a=c.startAngle+((c.endAngle-c.startAngle)/2-r/2)}else a=c.startAngle+(c.endAngle-c.startAngle)/2,this.ctx.textAlign="center";a+=this.rotationAngle;for(let t=0;t<f[e].length;t++){this.ctx.save();let o=f[e].charAt(t);this.ctx.translate(m,u),this.ctx.rotate(this.degToRad(a)),this.ctx.translate(-m,-u),l&&this.ctx.strokeText(o,m,u-n+y),s&&this.ctx.fillText(o,m,u-n+y),a+=i,this.ctx.restore()}}y+=t}}this.ctx.restore()}}},Winwheel.prototype.degToRad=function(e){return .017453292519943295*e},Winwheel.prototype.setCenter=function(e,t){this.centerX=e,this.centerY=t},Winwheel.prototype.addSegment=function(e,t){let n=new Segment(e);this.numSegments++;let i;if("undefined"!=typeof t){for(let e=this.numSegments;e>t;e--)this.segments[e]=this.segments[e-1];this.segments[t]=n,i=t}else this.segments[this.numSegments]=n,i=this.numSegments;return this.updateSegmentSizes(),this.segments[i]},Winwheel.prototype.setCanvasId=function(e){e?(this.canvasId=e,this.canvas=document.getElementById(this.canvasId),this.canvas&&(this.ctx=this.canvas.getContext("2d"))):(this.canvasId=null,this.ctx=null,this.canvas=null)},Winwheel.prototype.deleteSegment=function(e){if(1<this.numSegments){if("undefined"!=typeof e)for(let t=e;t<this.numSegments;t++)this.segments[t]=this.segments[t+1];this.segments[this.numSegments]=void 0,this.numSegments--,this.updateSegmentSizes()}},Winwheel.prototype.windowToCanvas=function(e,t){let n=this.canvas.getBoundingClientRect();return{x:Math.floor(e-n.left*(this.canvas.width/n.width)),y:Math.floor(t-n.top*(this.canvas.height/n.height))}},Winwheel.prototype.getSegmentAt=function(e,t){let n=null,i=this.getSegmentNumberAt(e,t);return null!==i&&(n=this.segments[i]),n},Winwheel.prototype.getSegmentNumberAt=function(e,t){let n,i,a,o,r,d=this.windowToCanvas(e,t),s=this.centerX*this.scaleFactor,l=this.centerY*this.scaleFactor,g=this.outerRadius*this.scaleFactor,c=this.innerRadius*this.scaleFactor;d.x>s?(a=d.x-s,i="R"):(a=s-d.x,i="L"),d.y>l?(o=d.y-l,n="B"):(o=l-d.y,n="T");let m=o/a,u=180*Math.atan(m)/Math.PI,p=0;if(r=Math.sqrt(o*o+a*a),"T"==n&&"R"==i?p=Math.round(90-u):"B"==n&&"R"==i?p=Math.round(u+90):"B"==n&&"L"==i?p=Math.round(90-u+180):"T"==n&&"L"==i&&(p=Math.round(u+270)),0!=this.rotationAngle){let e=this.getRotationPosition();p-=e,0>p&&(p=360-Math.abs(p))}let f=null;for(let n=1;n<=this.numSegments;n++)if(p>=this.segments[n].startAngle&&p<=this.segments[n].endAngle&&r>=c&&r<=g){f=n;break}return f},Winwheel.prototype.getIndicatedSegment=function(){let e=this.getIndicatedSegmentNumber();return this.segments[e]},Winwheel.prototype.getIndicatedSegmentNumber=function(){let e=0,t=this.getRotationPosition(),n=Math.floor(this.pointerAngle-t);0>n&&(n=360-Math.abs(n));for(let t=1;t<this.segments.length;t++)if(n>=this.segments[t].startAngle&&n<=this.segments[t].endAngle){e=t;break}return e},Winwheel.prototype.getCurrentPinNumber=function(){let e=0;if(this.pins){let t=this.getRotationPosition(),n=Math.floor(this.pointerAngle-t);0>n&&(n=360-Math.abs(n));let i=360/this.pins.number,a=0;for(let t=0;t<this.pins.number;t++){if(n>=a&&n<=a+i){e=t;break}a+=i}"clockwise"==this.animation.direction&&(e++,e>this.pins.number&&(e=0))}return e},Winwheel.prototype.getRotationPosition=function(){let e=this.rotationAngle;if(!(0<=e)){if(-360>e){let t=Math.ceil(e/360);e-=360*t}e=360+e}else if(360<e){let t=Math.floor(e/360);e-=360*t}return e},Winwheel.prototype.startAnimation=function(){if(this.animation){this.computeAnimation(),winwheelToDrawDuringAnimation=this;let e=[null];e[this.animation.propertyName]=this.animation.propertyValue,e.yoyo=this.animation.yoyo,e.repeat=this.animation.repeat,e.ease=this.animation.easing,e.onUpdate=winwheelAnimationLoop,e.onComplete=winwheelStopAnimation,this.tween=TweenMax.to(this,this.animation.duration,e)}},Winwheel.prototype.stopAnimation=function(e){winwheelToDrawDuringAnimation&&(winwheelToDrawDuringAnimation.tween&&winwheelToDrawDuringAnimation.tween.kill(),winwheelStopAnimation(e)),winwheelToDrawDuringAnimation=this},Winwheel.prototype.pauseAnimation=function(){this.tween&&this.tween.pause()},Winwheel.prototype.resumeAnimation=function(){this.tween&&this.tween.play()},Winwheel.prototype.computeAnimation=function(){this.animation&&("spinOngoing"==this.animation.type?(this.animation.propertyName="rotationAngle",null==this.animation.spins&&(this.animation.spins=5),null==this.animation.repeat&&(this.animation.repeat=-1),null==this.animation.easing&&(this.animation.easing="Linear.easeNone"),null==this.animation.yoyo&&(this.animation.yoyo=!1),this.animation.propertyValue=360*this.animation.spins,"anti-clockwise"==this.animation.direction&&(this.animation.propertyValue=0-this.animation.propertyValue)):"spinToStop"==this.animation.type?(this.animation.propertyName="rotationAngle",null==this.animation.spins&&(this.animation.spins=5),null==this.animation.repeat&&(this.animation.repeat=0),null==this.animation.easing&&(this.animation.easing="Power3.easeOut"),this.animation._stopAngle=null==this.animation.stopAngle?Math.floor(359*Math.random()):360-this.animation.stopAngle+this.pointerAngle,null==this.animation.yoyo&&(this.animation.yoyo=!1),this.animation.propertyValue=360*this.animation.spins,"anti-clockwise"==this.animation.direction?(this.animation.propertyValue=0-this.animation.propertyValue,this.animation.propertyValue-=360-this.animation._stopAngle):this.animation.propertyValue+=this.animation._stopAngle):"spinAndBack"==this.animation.type?(this.animation.propertyName="rotationAngle",null==this.animation.spins&&(this.animation.spins=5),null==this.animation.repeat&&(this.animation.repeat=1),null==this.animation.easing&&(this.animation.easing="Power2.easeInOut"),null==this.animation.yoyo&&(this.animation.yoyo=!0),this.animation._stopAngle=null==this.animation.stopAngle?0:360-this.animation.stopAngle,this.animation.propertyValue=360*this.animation.spins,"anti-clockwise"==this.animation.direction?(this.animation.propertyValue=0-this.animation.propertyValue,this.animation.propertyValue-=360-this.animation._stopAngle):this.animation.propertyValue+=this.animation._stopAngle):"custom"==this.animation.type)},Winwheel.prototype.getRandomForSegment=function(e){let t=0;if(!e)console.log("Segment number not specified");else if("undefined"!=typeof this.segments[e]){let n=this.segments[e].startAngle,i=this.segments[e].endAngle,a=i-n-2;0<a?t=n+1+Math.floor(Math.random()*a):console.log("Segment size is too small to safely get random angle inside it")}else console.log("Segment "+e+" undefined");return t};function Pin(e){let t={visible:!0,number:36,outerRadius:3,fillStyle:"grey",strokeStyle:"black",lineWidth:1,margin:3,responsive:!1};for(let n in t)this[n]=null!=e&&"undefined"!=typeof e[n]?e[n]:t[n];if(null!=e)for(let t in e)"undefined"==typeof this[t]&&(this[t]=e[t])}function Animation(e){let t={type:"spinOngoing",direction:"clockwise",propertyName:null,propertyValue:null,duration:10,yoyo:!1,repeat:null,easing:null,stopAngle:null,spins:null,clearTheCanvas:null,callbackFinished:null,callbackBefore:null,callbackAfter:null,callbackSound:null,soundTrigger:"segment"};for(let n in t)this[n]=null!=e&&"undefined"!=typeof e[n]?e[n]:t[n];if(null!=e)for(let t in e)"undefined"==typeof this[t]&&(this[t]=e[t])}function Segment(e){let t={size:null,text:"",fillStyle:null,strokeStyle:null,lineWidth:null,textFontFamily:null,textFontSize:null,textFontWeight:null,textOrientation:null,textAlignment:null,textDirection:null,textMargin:null,textFillStyle:null,textStrokeStyle:null,textLineWidth:null,image:null,imageDirection:null,imgData:null};for(let n in t)this[n]=null!=e&&"undefined"!=typeof e[n]?e[n]:t[n];if(null!=e)for(let t in e)"undefined"==typeof this[t]&&(this[t]=e[t]);this.startAngle=0,this.endAngle=0}Segment.prototype.changeImage=function(e,t){this.image=e,this.imgData=null,t&&(this.imageDirection=t),winhweelAlreadyDrawn=!1,this.imgData=new Image,this.imgData.onload=winwheelLoadedImage,this.imgData.src=this.image};function PointerGuide(e){let t={display:!1,strokeStyle:"red",lineWidth:3};for(let n in t)this[n]=null!=e&&"undefined"!=typeof e[n]?e[n]:t[n]}function winwheelPercentToDegrees(e){let t=0;if(0<e&&100>=e){t=360*(e/100)}return t}function winwheelAnimationLoop(){if(winwheelToDrawDuringAnimation){!1!=winwheelToDrawDuringAnimation.animation.clearTheCanvas&&winwheelToDrawDuringAnimation.ctx.clearRect(0,0,winwheelToDrawDuringAnimation.canvas.width,winwheelToDrawDuringAnimation.canvas.height);let callbackBefore=winwheelToDrawDuringAnimation.animation.callbackBefore,callbackAfter=winwheelToDrawDuringAnimation.animation.callbackAfter;null!=callbackBefore&&("function"==typeof callbackBefore?callbackBefore():eval(callbackBefore)),winwheelToDrawDuringAnimation.draw(!1),null!=callbackAfter&&("function"==typeof callbackAfter?callbackAfter():eval(callbackAfter)),winwheelToDrawDuringAnimation.animation.callbackSound&&winwheelTriggerSound()}}function winwheelTriggerSound(){!1==winwheelToDrawDuringAnimation.hasOwnProperty("_lastSoundTriggerNumber")&&(winwheelToDrawDuringAnimation._lastSoundTriggerNumber=0);let callbackSound=winwheelToDrawDuringAnimation.animation.callbackSound,currentTriggerNumber=0;currentTriggerNumber="pin"==winwheelToDrawDuringAnimation.animation.soundTrigger?winwheelToDrawDuringAnimation.getCurrentPinNumber():winwheelToDrawDuringAnimation.getIndicatedSegmentNumber(),currentTriggerNumber!=winwheelToDrawDuringAnimation._lastSoundTriggerNumber&&("function"==typeof callbackSound?callbackSound():eval(callbackSound),winwheelToDrawDuringAnimation._lastSoundTriggerNumber=currentTriggerNumber)}let winwheelToDrawDuringAnimation=null;function winwheelStopAnimation(canCallback){if(!1!=canCallback){let callback=winwheelToDrawDuringAnimation.animation.callbackFinished;null!=callback&&("function"==typeof callback?callback(winwheelToDrawDuringAnimation.getIndicatedSegment()):eval(callback))}}let winhweelAlreadyDrawn=!1;function winwheelLoadedImage(){if(!1==winhweelAlreadyDrawn){let e=0;for(let t=1;t<=winwheelToDrawDuringAnimation.numSegments;t++)null!=winwheelToDrawDuringAnimation.segments[t].imgData&&winwheelToDrawDuringAnimation.segments[t].imgData.height&&e++;e==winwheelToDrawDuringAnimation.numSegments&&(winhweelAlreadyDrawn=!0,winwheelToDrawDuringAnimation.draw())}}function winwheelResize(){let e=40;"undefined"!=typeof winwheelToDrawDuringAnimation._responsiveMargin&&(e=winwheelToDrawDuringAnimation._responsiveMargin);let t=window.innerWidth-e,n=winwheelToDrawDuringAnimation._responsiveMinWidth,i=winwheelToDrawDuringAnimation._responsiveMinHeight;t<n?t=n:t>winwheelToDrawDuringAnimation._originalCanvasWidth&&(t=winwheelToDrawDuringAnimation._originalCanvasWidth);let a=t/winwheelToDrawDuringAnimation._originalCanvasWidth;if(winwheelToDrawDuringAnimation.canvas.width=winwheelToDrawDuringAnimation._originalCanvasWidth*a,winwheelToDrawDuringAnimation._responsiveScaleHeight){let e=winwheelToDrawDuringAnimation._originalCanvasHeight*a;e<i?e=i:e>winwheelToDrawDuringAnimation._originalCanvasHeight&&(e=winwheelToDrawDuringAnimation._originalCanvasHeight),winwheelToDrawDuringAnimation.canvas.height=e}winwheelToDrawDuringAnimation.scaleFactor=a,winwheelToDrawDuringAnimation.draw()}